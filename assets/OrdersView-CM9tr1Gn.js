import{u as g,_ as b}from"./CardStore-DB_WCFHW.js";import{_ as v,s as k,x as O,o,c as a,a as e,e as r,F as w,j as x,b as l,i as S,n as C,f as j,m as B,r as E,g as N,h as P,d as p,k as T,l as f}from"./index-BaWbFXvs.js";import{u as h}from"./OrdersStore-BpeqQHME.js";const V={class:"order"},L={class:"text-lg"},$={class:"order-list"},q=["src"],F={class:"info mt-6 flex justify-between tracking-wide"},H={class:"text-green-600 pl-2"},I={class:"info mt-4 flex justify-between tracking-wide"},M={class:"text-green-600 pl-2"},U={class:"card-text"},z={class:"info mt-4 flex justify-between tracking-wide"},D={class:"text-blue-400 pl-2"},R={class:"text-green-600"},Y={__name:"OrderCard",props:{order:{type:Object,required:!0},numberOrder:{type:Number,required:!0}},setup(_){const c=_,{cards:m}=k(g()),i=O(()=>{const n={};return c.order.products.forEach(t=>{n[t]||(n[t]={count:c.order.products.filter(s=>s===t).length,...m.value.find(s=>s.id===t)})}),n});return(n,t)=>(o(),a("article",V,[e("h3",L,"Заказ № "+r(c.numberOrder),1),e("div",null,[t[0]||(t[0]=e("h4",null,"Товары:",-1)),e("ul",$,[(o(!0),a(w,null,x(i.value,(s,d)=>(o(),a("li",{key:d,class:"card"},[e("img",{class:"card-img",src:l(S)(s),alt:"Product Image"},null,8,q),e("div",F,[e("p",null,r(s.name),1),e("span",H,"₽"+r(s.price),1)]),e("span",null,"Количество: "+r(s.count),1),e("div",{class:"buy-section",style:C({height:l(j)(s)})},[e("div",I,[e("p",null,r(s.name),1),e("span",M,"₽"+r(s.price),1)]),e("p",U,r(s.description),1)],4)]))),128))])]),e("div",z,[e("p",D,[t[1]||(t[1]=B(" Итоговая цена заказа:   ")),e("span",R,"₽"+r(_.order.order_price),1)])])]))}},A=v(Y,[["__scopeId","data-v-007f96be"]]),G={class:"p-9 mt-6 flex flex-wrap gap-y-16 justify-start gap-12 bg-white rounded-sm min-h-svh w-full"},J={key:0,class:"m-auto mt-48 text-blue-600 text-3xl"},X={__name:"OrdersView",setup(_){const{getOrders:c}=h(),{getCards:m}=g(),i=h(),n=E(!1),t=()=>{n.value=window.scrollY>window.innerHeight*.3};return N(async()=>{await c(),await m(),window.addEventListener("scroll",t)}),P(()=>{window.removeEventListener("scroll",t)}),(s,d)=>(o(),a("section",G,[l(i).ordersProducts.length===0?(o(),a("h1",J," Заказов нет ")):p("",!0),(o(!0),a(w,null,x(l(i).ordersProducts,(u,y)=>(o(),T(A,{key:u.id,"number-order":y+1,order:u},null,8,["number-order","order"]))),128)),n.value?(o(),a("img",{key:1,class:"scroll-up",src:b,alt:"arrow-up",onClick:d[0]||(d[0]=(...u)=>l(f)&&l(f)(...u))})):p("",!0)]))}};export{X as default};
